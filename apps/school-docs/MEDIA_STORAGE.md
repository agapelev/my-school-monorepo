# Рекомендации по хранению больших медиа-файлов (.mp4)

В этом документе — краткие и практичные советы на русском языке о том, где удобно и бесплатно хранить .mp4-файлы, а также рекомендации по сжатию и размещению медиа вне git-репозитория.

## Кратко

- Не храните большие видео-файлы прямо в git-репозитории (они приводят к большим пакетам и проблемам с push).
- Для версионирования больших бинарных файлов используйте Git LFS (но учтите квоты GitHub).
- Для удобного бесплатного хранения и обмена используйте облачные сервисы (Google Drive, Dropbox, OneDrive) или платформы для видео (YouTube — unlisted) в зависимости от задач.

## Бесплатные и удобные варианты (плюсы / минусы)

1. Google Drive (Google)

   - Бесплатно: ~15 GB на аккаунт (включая почту и другие файлы).
   - Плюсы: удобно делиться ссылками, простая интеграция с Google Workspace, можно давать доступ по ссылке или для конкретных людей.
   - Минусы: не всегда удобно для прямого встраивания как потокового CDN — лучше использовать для скачивания или хранения мастер-файлов.

2. Dropbox

   - Бесплатно: небольшой объём (~2 GB) на бесплатном тарифе (можно расширять реферальными ссылками и т.п.).
   - Плюсы: простая синхронизация, прямые ссылки (raw) для скачивания.
   - Минусы: мало места в бесплатном тарифе.

3. OneDrive

   - Бесплатно: ~5 GB.
   - Плюсы: интеграция с Windows/Office, удобен для команд Microsoft.

4. MEGA / pCloud

   - Часто дают больший бесплатный объём (MEGA иногда даёт 20GB с условиями); pCloud — 10GB.
   - Плюсы: больше места на бесплатном аккаунте; у pCloud есть опции для прямых ссылок.
   - Минусы: условия иногда меняются, проверь актуальные квоты.

5. YouTube (Unlisted / Private)

   - Бесплатно и отлично для потоковой доставки и встраивания (iframe).
   - Плюсы: автоматическая транс- и оптимизация под сеть, легко встраивать в сайт.
   - Минусы: не подходит для приватных материалов (хотя есть Unlisted/Private) — репозиторий контроля доступа ограничен; YouTube перекодирует файл.

6. GitHub Releases

   - Подходит для дистрибутивов/релизных артефактов. Удобно прикреплять бинарные файлы к релизу проекта.
   - Ограничения: есть ограничения по размеру одного файла (обычно заметно выше 100 MB, но проверяйте) и по общему объёму. Не используйте для частых больших обновлений.

7. Облачные хранилища с CDN (не всегда бесплатно)
   - AWS S3 (с presigned URLs), Backblaze B2, Cloudflare R2, Google Cloud Storage.
   - Часто дают бесплатный «trial» или небольшой free-tier; для постоянной работы обычно платные.

## Практичные рекомендации (мой порядок предпочтений)

1. Для публичного потокового показа: загрузить на YouTube как `Unlisted` и встраивать ссылку/iframe.
2. Для приватного обмена внутри команды: Google Drive / Dropbox — быстрый и бесплатный способ.
3. Для публикации релизных артефактов (привязанных к релизам проекта): использовать `GitHub Releases` и прикреплять сжатую версию видео (если это приемлемо).
4. Если нужно хранить видео версионированными рядом с кодом — использовать `Git LFS`, но заранее проверить лимиты GitHub (по умолчанию есть бесплатный небольшой объём, дальше платно).

## Минимальные шаги — сокращение размера видео (рекомендую перед загрузкой)

1. Сжать/транскодировать видео с помощью ffmpeg (пример):

```bash
# Сжать видео в mp4, H.264, 720p, битрейт ~1500k
ffmpeg -i input.mp4 -c:v libx264 -preset slow -b:v 1500k -maxrate 1500k -bufsize 3000k -vf scale=-2:720 -c:a aac -b:a 128k output-720p.mp4
```

2. Используй HandBrake (GUI) для простого сжатия и предустановленных профилей.
3. Для веб-стриминга лучше держать 720p или 480p версии — экономит трафик и ускоряет загрузку.

## Быстрые инструкции (шаги) для популярных сервисов

A) Google Drive — быстрое хранение и шаринг

1.  Открой `drive.google.com` и войди в аккаунт.
2.  Нажми New → File upload → выбери файл .mp4.
3.  По окончании загрузки: Правый клик → "Get link" → выставь доступ "Anyone with the link" (если нужно) → Скопируй ссылку.
4.  Для прямой загрузки (raw) можно использовать сервисы-обёртки или API Google Drive для генерации прямой ссылки — учти, что прямой hotlinking не всегда удобен.

B) Dropbox — получить прямую ссылку (dl=1)

1.  Загрузить файл в Dropbox через веб-интерфейс.
2.  Нажать Share → Create link → Copy link.
3.  В ссылке заменить `?dl=0` на `?dl=1` — это заставит ссылку сразу скачивать (raw).

C) GitHub Releases — прикрепить файл к релизу

1.  На GitHub → вкладка Releases проекта → Draft a new release.
2.  Загрузить asset (Attach binaries by dropping here or selecting them).
3.  Опубликовать релиз. Файлы будут доступны для скачивания как часть релиза.
4.  Альтернатива: использовать `gh` CLI:

```bash
# создать релиз (если нужно)
gh release create v1.0.0
# загрузить файл к существующему релизу
gh release upload v1.0.0 path/to/video.mp4
```

D) YouTube (Unlisted) — лучший вариант для встраивания/потокинга

1.  Загрузить файл на YouTube (как Unlisted).
2.  Получить ссылку и/или iframe-код для встраивания.
3.  Преимущества: адаптивное качество, CDN, стабильно работает для пользователей.

## Git LFS — если всё-таки нужно хранить в репозитории

1. Установить git-lfs (локально):

```bash
# на Linux (пример для Debian/Ubuntu)
sudo apt install git-lfs
git lfs install
```

2. В репозитории:

```bash
git lfs track "public/videos/**/*.mp4"
git add .gitattributes
git commit -m "Track videos with Git LFS"
```

3. Если файлы уже закоммичены — использовать `git lfs migrate import --include="public/videos/**.mp4"` (перепишет локальную историю).

Внимание: GitHub предоставляет ограниченный бесплатный объём LFS-хранилища/трафика; сверх квоты — платно.

## Мои рекомендации (исходя из практики)

- Для сайта: загружай видеоверсии для веба (720p/480p), либо хость на YouTube (Unlisted) и встраивай плеер — это простейший и бесплатный способ доставки.
- Для приватного обмена и больших файлов внутри команды: Google Drive или pCloud/MEGA (если нужен большой бесплатный объём).
- Для контроля версий больших файлов — только Git LFS, и только если готов платить за storage/ bandwidth на GitHub.
- Всегда сжимай видео перед хранением/публикацией и веди исходники отдельно (backup, облако).

## Пример сопроводительного сообщения для участников проекта

"Пожалуйста, не добавляйте `.mp4` в git-репозиторий. Для демонстрационных / релизных видео используйте YouTube (Unlisted) или прикрепляйте артефакты в GitHub Releases. Для обмена внутри команды — Google Drive. В репозитории добавлено правило в `.gitignore` для `public/videos/**/*.mp4` — это предотвратит случайное добавление больших видео в будущем."

---

Если хочешь, могу также:

- добавить краткий раздел в `README.md` с этим текстом;
- настроить `git lfs` и помочь мигрировать конкретные файлы в LFS (по твоему согласию).

Автор рекомендаций: автоматизированный помощник — практичные шаги и команды подготовлены для быстрого использования.
